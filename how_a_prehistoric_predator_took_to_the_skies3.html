<script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
        return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                    row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                    headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
    }
</script>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Tests | IELTS WITH UMAR</title>
    <link rel="icon" href="IELTS WITH UMAR LOGO ORIGINAL.jpg" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --passage-bg: #f8f9fa;
            --questions-bg: #ffffff;
            --border-color: #e0e0e0;
            --highlight-color: #90EE90;
            /* Changed from blue (#87CEEB) to light green */
            --header-bg: #F0FFF0;
            /* Changed from light blue (#F0F8FF) to light green */
            --header-text: #333333;
            --button-bg: #28a745;
            /* Changed from blue (#007FFF) to green */
            --button-hover: #218838;
            /* Changed from darker blue (#005fbe) to darker green */
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --progress-complete: #28a745;
            /* Changed from blue (#007FFF) to green */
            --progress-incomplete: #bdbdbd;
            --timer-bg: #e6ffe6;
            /* Changed from light blue (#e0f2f7) to light green */
            --timer-text: #28a745;
            /* Changed from blue (#0288d1) to green */
            --footer-bg: #f5f5f5;
        }

        .night-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --passage-bg: #1e1e1e;
            --questions-bg: #1e1e1e;
            --border-color: #424242;
            --highlight-color: #2e7d32;
            /* Changed from dark blue (#0047AB) to dark green */
            --header-bg: #1a1a1a;
            --header-text: #ffffff;
            --button-bg: #2e7d32;
            /* Changed from dark blue (#0047AB) to dark green */
            --button-hover: #1b5e20;
            /* Changed from darker blue (#002e70) to darker green */
            --correct-color: #218838;
            --incorrect-color: #c82333;
            --progress-complete: #2e7d32;
            /* Changed from dark blue (#0047AB) to dark green */
            --progress-incomplete: #616161;
            --timer-bg: #1b5e20;
            /* Changed from dark blue (#002b4d) to dark green */
            --timer-text: #81c784;
            /* Changed from light blue (#81d4fa) to light green */
            --footer-bg: #121212;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .header-logo {
            font-size: 18px;
            font-weight: 600;
        }

        .header-logo a {
            color: var(--header-text);
            text-decoration: none;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .timer-container {
            background-color: var(--timer-bg);
            color: var(--timer-text);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
        }

        .timer-controls button {
            background: none;
            border: none;
            color: var(--timer-text);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-controls button:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .night-mode .timer-controls button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .mode-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            cursor: pointer;
            font-size: 20px;
            padding: 6px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-toggle:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .night-mode .mode-toggle:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-container,
        .questions-container {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
        }

        .passage-container {
            width: 50%;
            background-color: var(--passage-bg);
            border-right: 1px solid var(--border-color);
            position: relative;
        }

        .questions-container {
            width: 50%;
            background-color: var(--questions-bg);
        }

        .passage-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .passage-text {
            font-size: 17px;
        }

        .question-text {
            font-size: 17px;
            line-height: 1.8;
        }

        .passage-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight {
            background-color: var(--highlight-color);
            cursor: pointer;
        }

        .highlight-tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-color);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-group {
            margin-bottom: 30px;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--passage-bg);
            border-left: 4px solid var(--border-color);
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: baseline;
        }

        .question-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-color: var(--progress-incomplete);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .question.answered .question-number {
            background-color: var(--progress-complete);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .option input {
            margin-right: 8px;
        }

        .fill-in-the-blank {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--text-color);
            width: 150px;
            font-family: inherit;
            font-size: 1em;
            color: inherit;
            padding: 0 4px 2px 4px;
            margin: 0 3px;
            vertical-align: baseline;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }

        .fill-in-the-blank:focus {
            border-bottom-color: var(--button-bg);
        }

        .instructions {
            font-size: 14px;
            color: #757575;
            margin-top: 5px;
            font-style: italic;
        }

        .matching-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 16px;
        }

        .matching-table th,
        .matching-table td {
            border: 1px solid var(--border-color);
            padding: 10px 15px;
            text-align: center;
        }

        .matching-table th {
            background-color: var(--header-bg);
            color: var(--header-text);
            font-weight: 600;
        }

        .matching-table td {
            background-color: var(--passage-bg);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .matching-table td:hover:not(.question-cell):not(.header-cell) {
            background-color: rgba(40, 167, 69, 0.1);
            /* Adjusted for green */
        }

        .night-mode .matching-table td:hover:not(.question-cell):not(.header-cell) {
            background-color: rgba(46, 125, 50, 0.2);
            /* Adjusted for green */
        }

        .matching-table .question-cell {
            text-align: left;
            font-weight: 500;
            background-color: var(--questions-bg);
        }

        .matching-table .header-cell {
            background-color: var(--header-bg);
            color: var(--header-text);
            font-weight: 600;
        }

        .matching-table .selected {
            background-color: var(--highlight-color);
        }

        footer {
            background-color: var(--footer-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.05);
        }

        .progress-container {
            display: flex;
            gap: 8px;
        }

        .progress-item {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--progress-incomplete);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .progress-item:hover {
            transform: scale(1.1);
        }

        .progress-item.completed {
            background-color: var(--progress-complete);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .btn-primary {
            background-color: var(--button-bg);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--button-hover);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--button-bg);
            color: var(--button-bg);
        }

        .btn-secondary:hover {
            background-color: rgba(40, 167, 69, 0.1);
            /* Adjusted for green */
        }

        .night-mode .btn-secondary:hover {
            background-color: rgba(46, 125, 50, 0.2);
            /* Adjusted for green */
        }

        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .feedback-container {
            background-color: var(--passage-bg);
            width: 90%;
            max-width: 900px;
            height: 90%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .feedback-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feedback-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #close-feedback {
            font-size: 24px;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .score-display {
            font-size: 24px;
            font-weight: 700;
            margin-left: 10px;
        }

        .feedback-body {
            padding: 20px;
            overflow-y: auto;
        }

        .feedback-item {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--questions-bg);
        }

        .feedback-question {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .feedback-answer {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 4px;
            background-color: rgba(0, 0, 0, 0.05);
        }

        .correct {
            color: var(--correct-color);
        }

        .incorrect {
            color: var(--incorrect-color);
        }

        .feedback-explanation {
            margin-top: 10px;
            padding: 10px;
            border-left: 3px solid var(--button-bg);
            background-color: rgba(0, 0, 0, 0.03);
        }

        .feedback-passage {
            margin-top: 8px;
            font-style: italic;
            color: #757575;
        }

        @media (max-width: 900px) {
            main {
                flex-direction: column;
            }

            .passage-container,
            .questions-container {
                width: 100%;
                height: 50%;
            }

            .passage-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .progress-container {
                flex-wrap: wrap;
                max-width: 60%;
            }
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .header-controls {
                width: 100%;
                justify-content: space-around;
            }

            .progress-container {
                max-width: 50%;
            }

            .progress-item {
                width: 26px;
                height: 26px;
                font-size: 12px;
            }

            footer {
                flex-direction: column;
                gap: 15px;
            }

            .action-buttons {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <header style="background-color: rgb(0, 175, 0);">
        <div class="header-controls">
            <div class="timer-container">
                <i class="fas fa-clock"></i>
                <span id="timer">20:00</span>
                <div class="timer-controls">
                    <button id="start-timer" title="Start"><i class="fas fa-play"></i></button>
                    <button id="pause-timer" title="Pause"><i class="fas fa-pause"></i></button>
                    <button id="reset-timer" title="Reset"><i class="fas fa-redo"></i></button>
                </div>
            </div>
            <button class="mode-toggle" id="night-mode-toggle" title="Toggle Night Mode">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <main>
        <div class="passage-container" id="passage-container">
            <div class="passage-content">
                <div class="passage-title">How a Prehistoric Predator Took to the Skies</div>
                <div class="passage-text" id="passage-text">
                    <p>Is that a bird in the sky? A plane? No, it’s a pterosaur. Kate Thomas meets Professor Matthew
                        Wilkinson, who built a life-size model to find out how this prehistoric predator ever got off
                        the ground.</p>
                    <p>Pterosaurs existed from the Triassic period, 220 million years ago, to the end of the Cretaceous
                        period, 65 million years ago, when South America pulled away from Africa and the South Atlantic
                        was formed. They are among the least understood of all the creatures that once spent their lives
                        in the skies while the dinosaurs dominated the land. Pterosaurs had no feathers, but at least
                        part of their bodies was covered in hair, not unlike bats. Some believe this is an indication
                        they were warm-blooded. Researchers also debate whether pterosaurs travelled on the ground by
                        walking on their hind legs, like birds, or by using all fours, relying on their three-fingered
                        front feet as well as their four-toed rear feet.</p>
                    <p>Pterosaurs were vertebrates, meaning they were the first species possessing backbones to become
                        airborne, but scientists have never quite understood their flight technique. How, they wondered,
                        did such a heavy creature ever manage to get off the ground? What sort of a wing that appears to
                        have been supported by fine, hollow bones could have carried one into the sky? Then came the
                        discovery of a site in Brazil’s Araripe basin. Here, not only were hundreds of fossils of
                        amphibians and other reptiles found, but archaeologists unearthed a number of very
                        well-preserved pterosaurs. The anhanguera – a fish-eating sub-species of pterosaur that ruled
                        the skies in the Cretaceous period – was among them. With a wingspan of up to 12 metres, they
                        would have made an amazing sight in the sky – had any human been there to witness it. “I’ve been
                        studying pterosaurs for about eight years now,” says Dr Matthew Wilkinson, a professor of
                        zoology at Cambridge University. With an anhanguera fossil as his model, Wilkinson began
                        gradually reconstructing its skeletal structure in his Cambridge studio. The probability of
                        finding three-dimensional pterosaur fossils anywhere is slim. That was quite a find, he says.
                        Their bones are usually crushed flat. Where the structure was complete, it allowed him to make a
                        robot version as a way to understand the animal’s locomotion. With a team of model-makers, he
                        has built a remote-controlled pterosaur in his studio. Fossils show just how large these
                        creatures were. “I’ve always been interested in how they managed to launch themselves, so I
                        thought the real test would be to actually build one and fly it.”</p>
                    <p>Wilkinson hasn’t been alone in his desire to recreate a prehistoric beast. Swiss scientists
                        recently announced they had built robots that could move on land and swim in water using the
                        sort of backbone movements that must have been employed by the first creatures to crawl from the
                        sea. But Wilkinson has the added complication of working out his creature’s flight technique.
                        Unlike those of bats or flying squirrels, pterosaur wings – soft, stretchy membranes of skin
                        tissue – are thought to have reached from the chest to the wingtip, reinforced by fibres that
                        stiffened the wing and a structure bearing an elongated bone called the pteroid. It had
                        previously been thought the pteroid pointed towards the shoulder of the creature and supported a
                        soft forewing in front of the arm. But if that were the case, the forewing would have been too
                        small and ineffectual for flight. However, to the surprise of many scientists, fossils from the
                        Araripe basin showed the pteroid possibly faced the opposite way, creating a much greater
                        forewing that would have caught the air, working in the same way as the flaps on the wings of an
                        aeroplane. So, with both feet on the ground, the anhanguera might have simply faced into the
                        wind, spread its wings and risen up into the sky. Initial trials of models of pterosaurs with
                        forward-facing pteroids were not only adept at gliding, but were also capable of powered flight.
                    </p>
                    <p>* amphibians: animals that can live both in water and on land</p>
                </div>
            </div>
        </div>

        <div class="questions-container" id="questions-container">
            <div class="section-title">Questions 27–32</div>
            <div class="instructions">Complete the summary using the list of words, A-L, below. Write the correct
                letter, A-L, in boxes 27-32 on your answer sheet.</div>
            <div class="question-group">
                <div class="question" id="q27">
                    <div class="question-title">
                        <div class="question-number">27</div>
                        <div class="question-text">Pterosaurs are believed to have existed until the end of the
                            Cretaceous period. They are classed as <input type="text" class="fill-in-the-blank"
                                name="q27"> which were capable of flight, although, unlike modern species, they had some
                            <input type="text" class="fill-in-the-blank" name="q28"> which is evidence of their having
                            had warm blood. There are two theories as to how they moved on land, perhaps with all their
                            feet or by using their <input type="text" class="fill-in-the-blank" name="q29"> only.
                            Another mystery has concerned the ability of the pterosaur to fly despite its immense <input
                                type="text" class="fill-in-the-blank" name="q30"> and the fact that the bones making up
                            the wing did not have great <input type="text" class="fill-in-the-blank" name="q31">. Thanks
                            to reptile fossils found in Brazil, we now know that the subspecies known as anhanguera had
                            wings that were 12 metres across and that it mainly survived on <input type="text"
                                class="fill-in-the-blank" name="q32">.</div>
                    </div>
                    <div class="options-list">
                        <strong>List of Words</strong>
                        <ul>
                            <li>A. front feet</li>
                            <li>B. fish</li>
                            <li>C. dinosaurs</li>
                            <li>D. reptiles</li>
                            <li>E. flexibility</li>
                            <li>F. hind legs</li>
                            <li>G. amphibians</li>
                            <li>H. birds</li>
                            <li>I. hair</li>
                            <li>J. weight</li>
                            <li>K. strength</li>
                            <li>L. feathers</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section-title">Questions 33–36</div>
            <div class="instructions">Do the following statements agree with the claims of the writer in Reading Passage
                3? In boxes 33-36 on your answer sheet, write<br>YES
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                if the statement agrees with the claims of the writer<br>NO
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                if the statement contradicts the claims of the writer<br>NOT GIVEN
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if it is impossible to say what the writer
                thinks about this</div>
            <div class="question-group">
                <div class="question" id="q33">
                    <div class="question-title">
                        <div class="question-number">33</div>
                        <div class="question-text">It is rare to find a fossil of a pterosaur that clearly shows its
                            skeleton.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q33" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q33" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q33" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
                <div class="question" id="q34">
                    <div class="question-title">
                        <div class="question-number">34</div>
                        <div class="question-text">The reason for building the model was to prove pterosaurs flew for
                            long distances.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q34" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q34" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
                <div class="question" id="q35">
                    <div class="question-title">
                        <div class="question-number">35</div>
                        <div class="question-text">It is possible that pterosaur species achieved their wing size as a
                            result of the pteroid.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q35" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q35" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
                <div class="question" id="q36">
                    <div class="question-title">
                        <div class="question-number">36</div>
                        <div class="question-text">Wilkinson has made several unsuccessful replicas of the pterosaur’s
                            head.</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q36" value="YES"> YES</label>
                        <label class="option"><input type="radio" name="q36" value="NO"> NO</label>
                        <label class="option"><input type="radio" name="q36" value="NOT GIVEN"> NOT GIVEN</label>
                    </div>
                </div>
            </div>

            <div class="section-title">Questions 37–40</div>
            <div class="instructions">Choose the correct letter, A, B, C or D. Write the correct letter in boxes 37-40
                on your answer sheet.</div>
            <div class="question-group">
                <div class="question" id="q37">
                    <div class="question-title">
                        <div class="question-number">37</div>
                        <div class="question-text">What was Professor Wilkinson’s main problem, according to the third
                            paragraph?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q37" value="A"> A. Early amphibians had a more
                            complex structure than pterosaurs.</label>
                        <label class="option"><input type="radio" name="q37" value="B"> B. Understanding how pterosaurs
                            achieved flight.</label>
                        <label class="option"><input type="radio" name="q37" value="C"> C. Finding well-preserved
                            pterosaur fossils.</label>
                        <label class="option"><input type="radio" name="q37" value="D"> D. Reconstructing the skeletal
                            structure of the anhanguera.</label>
                    </div>
                </div>
                <div class="question" id="q38">
                    <div class="question-title">
                        <div class="question-number">38</div>
                        <div class="question-text">What surprised scientists about the pteroid bone in the Araripe basin
                            fossils?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q38" value="A"> A. It pointed towards the
                            shoulder of the pterosaur.</label>
                        <label class="option"><input type="radio" name="q38" value="B"> B. It was smaller than
                            expected.</label>
                        <label class="option"><input type="radio" name="q38" value="C"> C. It faced the opposite
                            direction to what was previously thought.</label>
                        <label class="option"><input type="radio" name="q38" value="D"> D. It was absent in some
                            pterosaur species.</label>
                    </div>
                </div>
                <div class="question" id="q39">
                    <div class="question-title">
                        <div class="question-number">39</div>
                        <div class="question-text">How did the anhanguera likely take off, according to Wilkinson’s
                            findings?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q39" value="A"> A. By flapping its wings rapidly
                            while running.</label>
                        <label class="option"><input type="radio" name="q39" value="B"> B. By facing into the wind and
                            spreading its wings.</label>
                        <label class="option"><input type="radio" name="q39" value="C"> C. By jumping off cliffs to gain
                            altitude.</label>
                        <label class="option"><input type="radio" name="q39" value="D"> D. By using its hind legs to
                            leap into the air.</label>
                    </div>
                </div>
                <div class="question" id="q40">
                    <div class="question-title">
                        <div class="question-number">40</div>
                        <div class="question-text">What did the initial trials of pterosaur models with forward-facing
                            pteroids demonstrate?</div>
                    </div>
                    <div class="options">
                        <label class="option"><input type="radio" name="q40" value="A"> A. They could only glide short
                            distances.</label>
                        <label class="option"><input type="radio" name="q40" value="B"> B. They were capable of both
                            gliding and powered flight.</label>
                        <label class="option"><input type="radio" name="q40" value="C"> C. They required strong winds to
                            achieve lift.</label>
                        <label class="option"><input type="radio" name="q40" value="D"> D. They were unable to achieve
                            stable flight.</label>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="progress-container" id="progress-container">
        </div>
        <div class="action-buttons">
            <button class="btn-secondary" id="reset-btn">Reset Answers</button>
            <button class="btn-primary" id="submit-btn">Submit Answers</button>
        </div>
    </footer>

    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-container" id="feedback-container">
            <div class="feedback-header">
                <div class="feedback-title">
                    <i class="fas fa-chart-bar"></i> Your Results
                    <span class="score-display" id="score-display">0/14</span>
                </div>
                <button id="close-feedback" title="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="feedback-body" id="feedback-body">
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Timer functionality
            let timerInterval;
            let seconds = 1200; // 20 minutes
            let timerRunning = false;

            const timerDisplay = document.getElementById('timer');
            const startTimer = document.getElementById('start-timer');
            const pauseTimer = document.getElementById('pause-timer');
            const resetTimer = document.getElementById('reset-timer');

            if (!timerDisplay || !startTimer || !pauseTimer || !resetTimer) {
                console.error('One or more timer elements not found');
                return;
            }

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                return `${mins}:${secs}`;
            }

            function updateTimer() {
                timerDisplay.textContent = formatTime(seconds);
                if (seconds <= 0) {
                    clearInterval(timerInterval);
                    timerRunning = false;
                    const submitBtn = document.getElementById('submit-btn');
                    if (submitBtn) submitBtn.click();
                }
            }

            startTimer.addEventListener('click', () => {
                if (!timerRunning) {
                    timerRunning = true;
                    timerInterval = setInterval(() => {
                        seconds--;
                        updateTimer();
                    }, 1000);
                }
            });

            pauseTimer.addEventListener('click', () => {
                if (timerRunning) {
                    clearInterval(timerInterval);
                    timerRunning = false;
                }
            });

            resetTimer.addEventListener('click', () => {
                clearInterval(timerInterval);
                timerRunning = false;
                seconds = 1200;
                updateTimer();
            });

            // Night mode toggle
            const nightModeToggle = document.getElementById('night-mode-toggle');
            if (nightModeToggle) {
                nightModeToggle.addEventListener('click', () => {
                    document.body.classList.toggle('night-mode');
                    const icon = nightModeToggle.querySelector('i');
                    if (document.body.classList.contains('night-mode')) {
                        icon.classList.remove('fa-moon');
                        icon.classList.add('fa-sun');
                    } else {
                        icon.classList.remove('fa-sun');
                        icon.classList.add('fa-moon');
                    }
                });
            } else {
                console.error('Night mode toggle element not found');
            }

            // Create progress indicators for questions 27-40
            const progressContainer = document.getElementById('progress-container');
            if (progressContainer) {
                for (let i = 27; i <= 40; i++) {
                    const progressItem = document.createElement('div');
                    progressItem.className = 'progress-item';
                    progressItem.textContent = i;
                    progressItem.dataset.question = i;
                    progressContainer.appendChild(progressItem);

                    progressItem.addEventListener('click', () => {
                        const questionElement = document.getElementById(`q${i}`);
                        if (questionElement) {
                            questionElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                }
            } else {
                console.error('Progress container not found');
            }

            // Text highlighting functionality
            let highlightTooltip = null;

            function handleMouseUp(e) {
                const container = e.currentTarget;
                const selection = window.getSelection();
                if (selection.toString().trim() !== '' && container.contains(selection.anchorNode)) {
                    const range = selection.getRangeAt(0);
                    const rect = range.getBoundingClientRect();

                    if (highlightTooltip) {
                        highlightTooltip.remove();
                        highlightTooltip = null;
                    }

                    highlightTooltip = document.createElement('div');
                    highlightTooltip.className = 'highlight-tooltip';
                    highlightTooltip.innerHTML = '<i class="fas fa-highlighter"></i> Highlight';
                    highlightTooltip.style.position = 'fixed';
                    highlightTooltip.style.top = `${rect.top - 40}px`;
                    highlightTooltip.style.left = `${rect.left}px`;
                    document.body.appendChild(highlightTooltip);

                    highlightTooltip.addEventListener('click', () => {
                        const span = document.createElement('span');
                        span.className = 'highlight';
                        span.appendChild(range.extractContents());
                        range.insertNode(span);
                        selection.removeAllRanges();
                        highlightTooltip.remove();
                        highlightTooltip = null;
                    });
                }
            }

            const passageText = document.getElementById('passage-text');
            const questionsContainer = document.getElementById('questions-container');
            if (passageText) {
                passageText.addEventListener('mouseup', handleMouseUp);
            } else {
                console.error('Passage text element not found');
            }
            if (questionsContainer) {
                questionsContainer.addEventListener('mouseup', handleMouseUp);
            } else {
                console.error('Questions container not found');
            }

            document.addEventListener('mousedown', (e) => {
                if (highlightTooltip && !highlightTooltip.contains(e.target)) {
                    highlightTooltip.remove();
                    highlightTooltip = null;
                    window.getSelection().removeAllRanges();
                }
            });

            // Store user answers for all questions
            const userAnswers = {};

            // Track answered questions and update progress bar
            const progressItems = document.querySelectorAll('.progress-item');

            function updateProgress() {
                let answeredCount = 0;

                for (let i = 27; i <= 40; i++) {
                    const questionNumber = i;
                    let answered = false;

                    if (questionNumber >= 27 && questionNumber <= 32) {
                        const input = document.querySelector(`input[name="q${questionNumber}"]`);
                        answered = input && input.value.trim() !== '';
                        if (answered) {
                            userAnswers[questionNumber] = input.value.trim().toUpperCase();
                        } else {
                            delete userAnswers[questionNumber];
                        }
                    } else if (questionNumber >= 33 && questionNumber <= 40) {
                        const selectedOption = document.querySelector(`input[name="q${questionNumber}"]:checked`);
                        answered = selectedOption !== null;
                        if (answered) {
                            userAnswers[questionNumber] = selectedOption.value;
                        } else {
                            delete userAnswers[questionNumber];
                        }
                    }

                    const progressItem = progressItems[questionNumber - 27];
                    if (answered && progressItem) {
                        progressItem.classList.add('completed');
                        answeredCount++;
                    } else if (progressItem) {
                        progressItem.classList.remove('completed');
                    }
                }
                return answeredCount;
            }

            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.addEventListener('input', updateProgress);
            });

            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', updateProgress);
            });

            // Reset button
            const resetBtn = document.getElementById('reset-btn');
            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                    document.querySelectorAll('input[type="text"]').forEach(input => {
                        input.value = '';
                    });

                    document.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.checked = false;
                    });

                    for (let key in userAnswers) {
                        delete userAnswers[key];
                    }

                    document.querySelectorAll('.highlight').forEach(highlight => {
                        const parent = highlight.parentNode;
                        while (highlight.firstChild) {
                            parent.insertBefore(highlight.firstChild, highlight);
                        }
                        parent.removeChild(highlight);
                        parent.normalize();
                    });

                    updateProgress();
                    const feedbackOverlay = document.getElementById('feedback-overlay');
                    if (feedbackOverlay) feedbackOverlay.style.display = 'none';
                });
            } else {
                console.error('Reset button not found');
            }

            // Submit and Feedback functionality
            const feedbackOverlay = document.getElementById('feedback-overlay');
            const closeFeedbackBtn = document.getElementById('close-feedback');
            const submitBtn = document.getElementById('submit-btn');

            if (!feedbackOverlay || !closeFeedbackBtn || !submitBtn) {
                console.error('Feedback or submit elements not found');
                return;
            }

            submitBtn.addEventListener('click', () => {
                pauseTimer.click();

                const answers = {
                    27: 'D', 28: 'I', 29: 'F', 30: 'J', 31: 'K', 32: 'B',
                    33: 'YES', 34: 'NO', 35: 'YES', 36: 'NOT GIVEN',
                    37: 'B', 38: 'C', 39: 'B', 40: 'B'
                };

                const explanations = {
                    27: "The passage states, 'Pterosaurs were vertebrates,' and they are described as reptiles in the context of fossils found with amphibians and other reptiles, making 'reptiles' the correct classification.",
                    28: "The passage notes, 'Pterosaurs had no feathers, but at least part of their bodies was covered in hair, not unlike bats. Some believe this is an indication they were warm-blooded.'",
                    29: "The passage mentions, 'Researchers also debate whether pterosaurs travelled on the ground by walking on their hind legs, like birds, or by using all fours.'",
                    30: "The passage questions, 'How, they wondered, did such a heavy creature ever manage to get off the ground?' indicating weight as a mystery.",
                    31: "The passage refers to wings 'supported by fine, hollow bones,' implying they lacked great strength.",
                    32: "The passage describes the anhanguera as 'a fish-eating sub-species of pterosaur.'",
                    33: "The passage states, 'The probability of finding three-dimensional pterosaur fossils anywhere is slim. That was quite a find, he says. Their bones are usually crushed flat.'",
                    34: "The passage says Wilkinson was interested in 'how they managed to launch themselves,' not specifically to prove long-distance flight.",
                    35: "The passage suggests, 'fossils from the Araripe basin showed the pteroid possibly faced the opposite way, creating a much greater forewing,' implying the pteroid contributed to wing size.",
                    36: "There is no mention in the passage of Wilkinson making replicas of the pterosaur’s head, successful or not.",
                    37: "The third paragraph focuses on the mystery of 'their flight technique' and how a heavy creature with fine, hollow bones could fly.",
                    38: "The passage notes, 'fossils from the Araripe basin showed the pteroid possibly faced the opposite way, creating a much greater forewing,' which surprised scientists.",
                    39: "The passage states, 'the anhanguera might have simply faced into the wind, spread its wings and risen up into the sky.'",
                    40: "The passage concludes, 'Initial trials of models of pterosaurs with forward-facing pteroids were not only adept at gliding, but were also capable of powered flight.'"
                };

                const passageReferences = {
                    27: "Pterosaurs were vertebrates, meaning they were the first species possessing backbones to become airborne... Here, not only were hundreds of fossils of amphibians and other reptiles found, but archaeologists unearthed a number of very well-preserved pterosaurs.",
                    28: "Pterosaurs had no feathers, but at least part of their bodies was covered in hair, not unlike bats. Some believe this is an indication they were warm-blooded.",
                    29: "Researchers also debate whether pterosaurs travelled on the ground by walking on their hind legs, like birds, or by using all fours, relying on their three-fingered front feet as well as their four-toed rear feet.",
                    30: "How, they wondered, did such a heavy creature ever manage to get off the ground?",
                    31: "What sort of a wing that appears to have been supported by fine, hollow bones could have carried one into the sky?",
                    32: "The anhanguera – a fish-eating sub-species of pterosaur that ruled the skies in the Cretaceous period – was among them.",
                    33: "The probability of finding three-dimensional pterosaur fossils anywhere is slim. That was quite a find, he says. Their bones are usually crushed flat.",
                    34: "I’ve always been interested in how they managed to launch themselves, so I thought the real test would be to actually build one and fly it.",
                    35: "fossils from the Araripe basin showed the pteroid possibly faced the opposite way, creating a much greater forewing that would have caught the air.",
                    36: "No relevant passage provided.",
                    37: "How, they wondered, did such a heavy creature ever manage to get off the ground? What sort of a wing that appears to have been supported by fine, hollow bones could have carried one into the sky?",
                    38: "fossils from the Araripe basin showed the pteroid possibly faced the opposite way, creating a much greater forewing that would have caught the air, working in the same way as the flaps on the wings of an aeroplane.",
                    39: "So, with both feet on the ground, the anhanguera might have simply faced into the wind, spread its wings and risen up into the sky.",
                    40: "Initial trials of models of pterosaurs with forward-facing pteroids were not only adept at gliding, but were also capable of powered flight."
                };

                let correctCount = 0;
                const feedbackBody = document.getElementById('feedback-body');
                if (feedbackBody) {
                    feedbackBody.innerHTML = '';
                } else {
                    console.error('Feedback body not found');
                    return;
                }

                for (let i = 27; i <= 40; i++) {
                    let userAnswer, isCorrect, questionHTML, actualQuestionText;
                    const feedbackItem = document.createElement('div');
                    feedbackItem.className = 'feedback-item';

                    if (i >= 27 && i <= 32) {
                        const input = document.querySelector(`input[name="q${i}"]`);
                        const questionDiv = document.getElementById(`q${i}`);
                        if (questionDiv) {
                            actualQuestionText = questionDiv.querySelector('.question-text').textContent;
                        }
                        userAnswer = userAnswers[i] || 'Not answered';
                        isCorrect = userAnswer === answers[i];

                        questionHTML = `<div class="question-title-text">${actualQuestionText || ''}</div>`;
                        questionHTML += `<div class="feedback-answer">Your selection: <span class="${isCorrect ? 'correct' : 'incorrect'}"><strong>${userAnswer}</strong></span>`;
                        if (!isCorrect) {
                            questionHTML += ` Correct answer: <span class="correct"><strong>${answers[i]}</strong></span>`;
                        }
                        questionHTML += `</div>`;
                    } else if (i >= 33 && i <= 40) {
                        const questionDiv = document.getElementById(`q${i}`);
                        if (questionDiv) {
                            actualQuestionText = questionDiv.querySelector('.question-text').textContent;
                        }
                        userAnswer = userAnswers[i] || 'Not answered';
                        isCorrect = userAnswer === answers[i];

                        let optionsHTML = '';
                        if (questionDiv) {
                            questionDiv.querySelectorAll('.options label').forEach(label => {
                                const value = label.querySelector('input').value;
                                const optionText = label.textContent.trim();
                                let optionClass = '';
                                if (value === userAnswer && !isCorrect) {
                                    optionClass = 'incorrect';
                                } else if (value === answers[i]) {
                                    optionClass = 'correct';
                                }
                                optionsHTML += `<span class="${optionClass}">${optionText}</span><br>`;
                            });
                        }

                        questionHTML = `<div class="question-title-text">${actualQuestionText || ''}</div><div class="options-feedback">${optionsHTML}</div>`;
                    }

                    if (isCorrect) correctCount++;

                    const currentPassageRef = passageReferences[i] || 'No relevant passage provided.';

                    feedbackItem.innerHTML = `
                        <div class="feedback-question">
                            <span class="${isCorrect ? 'correct' : 'incorrect'}">Question ${i}:</span>
                            ${isCorrect ? `<i class="fas fa-check correct" style="margin-left: 5px;"></i>` : `<i class="fas fa-times incorrect" style="margin-left: 5px;"></i>`}
                        </div>
                        <p>${questionHTML}</p>
                        <div class="feedback-answer">
                            <strong>Your answer:</strong> ${userAnswer || 'Not answered'}<br>
                            ${!isCorrect ? `<strong>Correct answer:</strong> ${answers[i]}` : ''}
                        </div>
                        <div class="feedback-explanation">
                            <strong>Explanation:</strong> ${explanations[i]}
                        </div>
                        <div class="feedback-passage">
                            <strong>Relevant passage:</strong> "${currentPassageRef}"
                        </div>
                    `;

                    feedbackBody.appendChild(feedbackItem);
                }

                const scoreDisplay = document.getElementById('score-display');
                if (scoreDisplay) {
                    scoreDisplay.textContent = `${correctCount}/14`;
                }
                feedbackOverlay.style.display = 'flex';
            });

            closeFeedbackBtn.addEventListener('click', () => {
                feedbackOverlay.style.display = 'none';
            });

            feedbackOverlay.addEventListener('click', (e) => {
                if (e.target === feedbackOverlay) {
                    feedbackOverlay.style.display = 'none';
                }
            });

            // Initialize timer display and progress
            updateTimer();
            updateProgress();
        });
    </script>
</body>

</html>